CREATE TYPE STATUS_TYPE AS ENUM ('HIRED', 'RECOMMENDED_FOR_PROMOTION', 'REGULAR');
CREATE TYPE POSITION_TYPE AS ENUM ('DIRECTOR', 'LABORER', 'HEAD_OF_DIVISION', 'DEVELOPER', 'COOK');
CREATE TYPE ORGANIZATIONTYPE_TYPE AS ENUM ('GOVERNMENT', 'PRIVATE_LIMITED_COMPANY', 'OPEN_JOINT_STOCK_COMPANY');


CREATE TABLE ADDRESS(
    ID BIGSERIAL PRIMARY KEY,
    STREET VARCHAR(144) NOT NULL
);

CREATE TABLE COORDINATES(
    ID BIGSERIAL PRIMARY KEY,
    X BIGINT,
    Y INTEGER NOT NULL CHECK(Y > -37)
);
CREATE TABLE ORGANIZATION(
    ID BIGSERIAL PRIMARY KEY,
    FULLNAME VARCHAR(943),
    EMPLOYEESCOUNT INTEGER NOT NULL,
    TYPE ORGANIZATIONTYPE_TYPE NOT NULL,
    ADDRESS_ID BIGINT,
    FOREIGN KEY(ADDRESS_ID) REFERENCES ADDRESS (ID)
);

CREATE TABLE USERS(
    NAME VARCHAR(100) PRIMARY KEY,
    PASSWORD VARCHAR(1000) NOT NULL
);

CREATE TABLE WORKER(
    ID BIGSERIAL PRIMARY KEY,
    NAME TEXT NOT NULL
    CHECK(NAME != ''),
    COORDINATES_ID BIGINT NOT NULL,
    CREATIONDATE TIMESTAMP NOT NULL,
    SALARY BIGINT CHECK(SALARY > 0),
    POSITION POSITION_TYPE NOT NULL,
    STATUS STATUS_TYPE,
    ORGANIZATION_ID BIGINT NOT NULL,
    USERNAME VARCHAR(100) NOT NULL,
    FOREIGN KEY(COORDINATES_ID) REFERENCES COORDINATES (ID),
    FOREIGN KEY(ORGANIZATION_ID) REFERENCES ORGANIZATION (ID),
    FOREIGN KEY(USERNAME) REFERENCES USERS (NAME)
);
